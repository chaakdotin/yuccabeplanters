<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Stacked Sections with Image Scaling using GSAP</title>
  <style>
    /* Basic Reset */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, sans-serif; overflow-x: hidden; }
    header {
      background: #333;
      color: #fff;
      padding: 20px;
      text-align: center;
    }
    .intro {
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: #f4f4f4;
      text-align: center;
    }
    .intro img { max-width: 80%; margin-top: 20px; }
    
    /* Container for small-section & panels */
    .stack-container {
      position: relative;
      /* Extra scroll space for all transitions */
      height: 300vh;
    }
    
    /* 5vh wale rectangular section */
    .small-section {
      position: fixed;
      top: 30vh;
      left: 0;
      width: 100%;
      height: 5vh;
      background: #e74c3c;
      z-index: 100;
      /* Shuruat mein viewport ke bahar */
      transform: translateY(100vh);
    }
    
    /* Panels styling */
    .panel {
      position: absolute;
      top: 30vh;
      left: 0;
      width: 100%;
      height: 65vh; /* Active panel height */
      transform: translateY(100%);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      color: #fff;
    }
    /* Panel text styling */
    .panel-text {
      font-size: 2em;
    }
    /* Panel image styling */
    .panel-image {
      width: 200px;
      transform-origin: center center;
      /* Default scale for all images */
      transform: scale(0.5);
    }
    /* Pehle panel ke image ko full scale par set karte hain */
    .panel.panel1 .panel-image {
      transform: scale(1);
    }
    
    /* Alag alag background colors for each section */
    .panel.panel1 { background: #1abc9c; }
    .panel.panel2 { background: #2ecc71; }
    .panel.panel3 { background: #3498db; }
    .panel.panel4 { background: #9b59b6; }
    .panel.panel5 { background: #34495e; }
    .panel.panel6 { background: #f1c40f; }
    .panel.panel7 { background: #e67e22; }
    .panel.panel8 { background: #e74c3c; }
    .panel.panel9 { background: #95a5a6; }
    .panel.panel10 { background: #7f8c8d; }
  </style>
</head>
<body>
  <header>
    <h1>Header Section</h1>
  </header>
  
  <!-- Intro Section -->
  <section class="intro">
    <h2>Welcome to My Webpage</h2>
    <p>Yahan par kuch text aur image dikh rahi hai.</p>
    <img src="https://via.placeholder.com/400x300" alt="Placeholder Image">
  </section>
  
  <!-- Stack Container with Small Section and 10 Panels -->
  <div class="stack-container">
    <div class="small-section"></div>
    
    <!-- Panel 1 -->
    <div class="panel panel1">
      <div class="panel-text">Section 1</div>
      <img class="panel-image" src="https://images.unsplash.com/photo-1601758123927-6ecfc62865d5?auto=format&fit=crop&w=400&q=80" alt="Image 1">
    </div>
    <!-- Panel 2 -->
    <div class="panel panel2">
      <div class="panel-text">Section 2</div>
      <img class="panel-image" src="https://images.unsplash.com/photo-1593642532973-d31b6557fa68?auto=format&fit=crop&w=400&q=80" alt="Image 2">
    </div>
    <!-- Panel 3 -->
    <div class="panel panel3">
      <div class="panel-text">Section 3</div>
      <img class="panel-image" src="https://images.unsplash.com/photo-1612832021251-7adfb0b6f8f3?auto=format&fit=crop&w=400&q=80" alt="Image 3">
    </div>
    <!-- Panel 4 -->
    <div class="panel panel4">
      <div class="panel-text">Section 4</div>
      <img class="panel-image" src="https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?auto=format&fit=crop&w=400&q=80" alt="Image 4">
    </div>
    <!-- Panel 5 -->
    <div class="panel panel5">
      <div class="panel-text">Section 5</div>
      <img class="panel-image" src="https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fit=crop&w=400&q=80" alt="Image 5">
    </div>
    <!-- Panel 6 -->
    <div class="panel panel6">
      <div class="panel-text">Section 6</div>
      <img class="panel-image" src="https://images.unsplash.com/photo-1581349482560-4ee1c53f21f2?auto=format&fit=crop&w=400&q=80" alt="Image 6">
    </div>
    <!-- Panel 7 -->
    <div class="panel panel7">
      <div class="panel-text">Section 7</div>
      <img class="panel-image" src="https://images.unsplash.com/photo-1517336714731-489689fd1ca8?auto=format&fit=crop&w=400&q=80" alt="Image 7">
    </div>
    <!-- Panel 8 -->
    <div class="panel panel8">
      <div class="panel-text">Section 8</div>
      <img class="panel-image" src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=400&q=80" alt="Image 8">
    </div>
    <!-- Panel 9 -->
    <div class="panel panel9">
      <div class="panel-text">Section 9</div>
      <img class="panel-image" src="https://images.unsplash.com/photo-1568605114967-8130f3a36994?auto=format&fit=crop&w=400&q=80" alt="Image 9">
    </div>
    <!-- Panel 10 -->
    <div class="panel panel10">
      <div class="panel-text">Section 10</div>
      <img class="panel-image" src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=400&q=80" alt="Image 10">
    </div>
  </div>
  
  <!-- GSAP & ScrollTrigger CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
  <script>
    gsap.registerPlugin(ScrollTrigger);

    let tl = gsap.timeline({
      scrollTrigger: {
        trigger: ".stack-container",
        start: "top top",
        end: "+=2000", // Scroll distance adjust kar sakte hain
        scrub: true,
        pin: true,
        // markers: true, // Debug ke liye markers enable karein
      }
    });

    // 1. Small-section slide in from neeche
    tl.fromTo(".small-section", { y: "100vh" }, { y: "0", duration: 0.5 });
    
    // 2. Panel 1 slide in from neeche
    tl.fromTo(".panel.panel1", { y: "100%" }, { y: "0%", duration: 1 }, "<");

    // Transition: Panel 1 shrink + Image scale animation + Panel 2 slide in & image scale up
    tl.to(".panel.panel1", { height: "5vh", y: "0%", duration: 1 });
    tl.to(".panel.panel1 .panel-image", { scale: 0.5, duration: 1 }, "<");
    tl.fromTo(".panel.panel2", { y: "100%" }, { y: "0%", duration: 1 }, "<");
    tl.fromTo(".panel.panel2 .panel-image", { scale: 0.5 }, { scale: 1, duration: 1 }, "<");

    // Transition: Panel 2 shrink & Panel 3 slide in with image scale changes
    tl.to(".panel.panel2", { height: "5vh", y: "0%", duration: 1 });
    tl.to(".panel.panel2 .panel-image", { scale: 0.5, duration: 1 }, "<");
    tl.fromTo(".panel.panel3", { y: "100%" }, { y: "0%", duration: 1 }, "<");
    tl.fromTo(".panel.panel3 .panel-image", { scale: 0.5 }, { scale: 1, duration: 1 }, "<");

    // Transition: Panel 3 -> Panel 4
    tl.to(".panel.panel3", { height: "5vh", y: "0%", duration: 1 });
    tl.to(".panel.panel3 .panel-image", { scale: 0.5, duration: 1 }, "<");
    tl.fromTo(".panel.panel4", { y: "100%" }, { y: "0%", duration: 1 }, "<");
    tl.fromTo(".panel.panel4 .panel-image", { scale: 0.5 }, { scale: 1, duration: 1 }, "<");

    // Transition: Panel 4 -> Panel 5
    tl.to(".panel.panel4", { height: "5vh", y: "0%", duration: 1 });
    tl.to(".panel.panel4 .panel-image", { scale: 0.5, duration: 1 }, "<");
    tl.fromTo(".panel.panel5", { y: "100%" }, { y: "0%", duration: 1 }, "<");
    tl.fromTo(".panel.panel5 .panel-image", { scale: 0.5 }, { scale: 1, duration: 1 }, "<");

    // Transition: Panel 5 -> Panel 6
    tl.to(".panel.panel5", { height: "5vh", y: "0%", duration: 1 });
    tl.to(".panel.panel5 .panel-image", { scale: 0.5, duration: 1 }, "<");
    tl.fromTo(".panel.panel6", { y: "100%" }, { y: "0%", duration: 1 }, "<");
    tl.fromTo(".panel.panel6 .panel-image", { scale: 0.5 }, { scale: 1, duration: 1 }, "<");

    // Transition: Panel 6 -> Panel 7
    tl.to(".panel.panel6", { height: "5vh", y: "0%", duration: 1 });
    tl.to(".panel.panel6 .panel-image", { scale: 0.5, duration: 1 }, "<");
    tl.fromTo(".panel.panel7", { y: "100%" }, { y: "0%", duration: 1 }, "<");
    tl.fromTo(".panel.panel7 .panel-image", { scale: 0.5 }, { scale: 1, duration: 1 }, "<");

    // Transition: Panel 7 -> Panel 8
    tl.to(".panel.panel7", { height: "5vh", y: "0%", duration: 1 });
    tl.to(".panel.panel7 .panel-image", { scale: 0.5, duration: 1 }, "<");
    tl.fromTo(".panel.panel8", { y: "100%" }, { y: "0%", duration: 1 }, "<");
    tl.fromTo(".panel.panel8 .panel-image", { scale: 0.5 }, { scale: 1, duration: 1 }, "<");

    // Transition: Panel 8 -> Panel 9
    tl.to(".panel.panel8", { height: "5vh", y: "0%", duration: 1 });
    tl.to(".panel.panel8 .panel-image", { scale: 0.5, duration: 1 }, "<");
    tl.fromTo(".panel.panel9", { y: "100%" }, { y: "0%", duration: 1 }, "<");
    tl.fromTo(".panel.panel9 .panel-image", { scale: 0.5 }, { scale: 1, duration: 1 }, "<");

    // Transition: Panel 9 -> Panel 10
    tl.to(".panel.panel9", { height: "5vh", y: "0%", duration: 1 });
    tl.to(".panel.panel9 .panel-image", { scale: 0.5, duration: 1 }, "<");
    tl.fromTo(".panel.panel10", { y: "100%" }, { y: "0%", duration: 1 }, "<");
    tl.fromTo(".panel.panel10 .panel-image", { scale: 0.5 }, { scale: 1, duration: 1 }, "<");
    
    // Agar chahein to aakhri panel par bhi shrink animation laga sakte hain.
    // tl.to(".panel.panel10", { height: "5vh", y: "0%", duration: 1 });
    // tl.to(".panel.panel10 .panel-image", { scale: 0.5, duration: 1 }, "<");
  </script>
</body>
</html>